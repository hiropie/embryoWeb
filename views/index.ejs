<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes">
  </head>
  <body>
    <div id="image">
      <img  src="/images/basis/first.png" id="embryo_gif" width="720" height="480"> 
      <div id="buttons">
        <button id="gifStart">再生</button>
        <form id="pushDispenser">
          <button id="push" type="submit">1プッシュ</button>
        </form>
        <form id="gifChange">
          <button id="reload" type="submit">reload</button>
        </form>
      </div>
      <table id="parameter">
        <tr align="center">
          <th>時間</th>
          <th>気温[℃]</th>
          <th>湿度[%]</th>
        </tr>
        <tr align="center">
          <td id="time">0</td>
          <td id="tmp">0</td>
          <td id="hum">0</td>
        </tr>
      </table>
    </div>

    <div id="humGraph" class="graph"></div>
    <div class="spacer"></div>
    <div id="tmpGraph" class="graph"></div>

    <div id="loading">
      <div class="spinner"></div>
    </div>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
        crossorigin="anonymous"></script>
    <script src="javascripts/web-socket.js"></script>
    <script>
      let data;
      let chartH;
      let chartT;
      let date = new Array();
      let humG = new Array();
      let tmpG = new Array();
      var accessCount = 1;
      window.onload = ()=>{
        setTimeout(()=>{
          const spinner = document.getElementById('loading');
          spinner.classList.add('loaded');
        },1000);
      };
      
      $('#gifStart').on('click', function(){
        nowSrc = $('img').attr('src');
        $('img').attr('src', nowSrc);
      });


    $(document).ready(function () {
      let op1 = {
        chart: {
          renderTo: tmpGraph,
          type: 'line',
        },
        title: {
        },
        xAxis: {
          gridLineWidth: 1,
          // labels: {
          //   step: 30
          // },
          min: 0
        },
        yAxis: {
          min: 20,
          gridLineWidth: 1,
          type: 'linear'
        },
        series: [{
            name: 'temperture',
            data: []
        }]
      };

      let op2 = {
        chart: {
           type: 'line',
        },
        title: {
        },
        xAxis: {
          gridLineWidth: 1,
          // labels: {
          //   step: 30
          // },
          min: 0
        },
        yAxis: {
          min: 20,
          gridLineWidth: 1,
          type: 'linear'
        },
        series: [{
            name: 'humidity',
            data: []
          }
        ]
      };

      let tmpChart = new Highcharts.Chart(op1);
      let humChart = new Highcharts.Chart(op2);
    });
    </script>
  </body>
</html>